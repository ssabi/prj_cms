<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="Content-Type" content="text/html"/>
  <meta http-equiv="Content-Script-Type" content="text/javascript">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport" content="user-scalable=yes,width=1250"/>
  <meta name="format-detection" content="telephone=no"/>
  <!-- GLOBAL LEVEL PLUGIN STYLES -->
  <link rel="stylesheet" type="text/css" media="all" href="assets/lib/slick/slick.css"/>
  <link rel="stylesheet" type="text/css" media="all" href="assets/lib/selectordie/selectordie.css"/>
  <link rel="stylesheet" type="text/css" media="all" href="assets/lib/jstree/themes/default/style.min.css"/>
  <!-- //GLOBAL LEVEL PLUGIN STYLES -->  
  <!-- GLOBAL LEVEL PLUGINS -->
  <script type="text/javascript" src="assets/lib/modernizr/modernizr.js"></script>
  <script type="text/javascript" src="assets/lib/jquery/jquery-1.12.1.min.js"></script>
  <script type="text/javascript" src="assets/lib/jquery-ui/jquery-ui.js"></script>
  <script type="text/javascript" src="assets/lib/slick/slick.js"></script>
  <script type="text/javascript" src="assets/lib/selectordie/selectordie.js"></script>
  <script type="text/javascript" src="assets/lib/jstree/jstree.min.js" ></script>
  <!-- //GLOBAL LEVEL PLUGINS -->
  
  <link rel="stylesheet" type="text/css" media="all" href="assets/css/common.css">
  <link rel="stylesheet" type="text/css" media="all" href="assets/css/style.css">
  <title></title>
</head>
<body>
<!-- BEGIN POPUP -->
<div id="popup" class="p_v1">
  <section>
    <div class="p_title">
      <h3>즐겨찾기 등록</h3>
      <a href="javascript:;" class="close"><i class="icon icon_close"></i></a>
    </div>
    <div class="p_container">
      <div class="p_content">
        <div class="row">
          <!-- jstree_area -->
          <div class="jstree_area">
            <div class="ctrl_layer add" data-toggle-target="toggle1">
              <div class="guide">추가할 폴더명을 입력해 주세요.</div>
              <div>
                <div class="t_fixed">
                  <div class="t_c_middle col1">
                    <input type="text" class="block">
                  </div>
                  <div class="t_c_middle col2">
                    <em class="desc alert">*최대N자</em>
                  </div>
                </div>
              </div>
              <div class="btns">
                <button type="button" class="btn v1 red big1"><em>등록</em></button>
                <button type="button" class="btn v1 grey big1" data-toggle-label="toggle1"><em>취소</em></button>
              </div>
            </div>
            <div class="jstree_header">
              <div class="tit">
                <strong>즐겨찾기 분류</strong>
              </div>
              <div class="ctrl">
                <button type="button" class="btn v1 grey" data-toggle-label="toggle1"><i></i><em>폴더추가</em></button>
              </div>
            </div>
            <div class="jstree_container">
              <div id="jstree1">
                <!-- jstree here -->
              </div>
              <script type="text/javascript">
				$(document).ready(function(){
					$('#jstree1').jstree({ 'core' : {
						'data' : [
							{
								text : 'Root node 2',
								state : {
									'opened' : true,
									'selected' : true
								},
								li_attr : {"class": "folder"},
								a_attr : {},  // attributes for the generated A node
								children : [
									{
										'text' : 'Child 1 Child 1 Child 1 Child 1 Child 1 Child 1 Child 1 Child 1 Child 1 Child 1 Child 1 Child 1 Child 1',
										state : {
											'opened' : true
										},
										children : [
											{
												'text' : 'Child 2',
												state : {
													'opened' : true
												},
												children : [
													{'text' : '컨텐츠인 경우', li_attr:{'class' : 'content'}},	//Content인 경우
													{'text' : 'Child 2'},
													{'text' : 'Child 2'}
												]
											}
										]
									},
									{ 
										'text' : 'Child 1',
										state : {
											'opened' : false
										},
										children : [
											{ 
												'text' : 'Child 2',
												state : {
													'opened' : false
												},
												children : [
													{'text' : 'Child 2'},
													{'text' : 'Child 2'},
													{'text' : 'Child 2'}
												]
											}
										]
									}
								]
							},
							{
								text : 'Root node 2',
								state : {
									'opened' : false,
									'selected' : false
								},
								li_attr : {"class": "folder"},
								a_attr : {},  // attributes for the generated A node
								children : [
									{
										'text' : 'Child 1',
										state : {
											'opened' : false
										},
										children : [
											{ 
												'text' : 'Child 2',
												state : {
													'opened' : false
												},
												children : [
													{'text' : 'Child 2'},
													{'text' : 'Child 2'},
													{'text' : 'Child 2'}
												]
											}
										]
									}
								]
							},
							{
								text : 'Root node 2',
								state : {
									'opened' : false,
									'selected' : false
								},
								li_attr : {"class": "folder"},
								a_attr : {},  // attributes for the generated A node
								children : [
									{
										'text' : 'Child 1',
										state : {
											'opened' : false
										},
										children : [
											{
												'text' : 'Child 2',
												state : {
													'opened' : false
												},
												children : [
													{'text' : 'Child 2'},
													{'text' : 'Child 2'},
													{'text' : 'Child 2'}
												]
											}
										]
									}
								]
							}
						]
					}
				});
                  /*
                  $("#jstree1").on("loaded.jstree",
                     function(evt, data){
                      var treeScrollWidth = parseInt($('.jstree-container-ul')[0].scrollWidth);
                      var jstreeCtMarginLeft = $('.jstree_area .jstree-container-ul > li').css('margin-left');
                      jstreeCtMarginLeft = Math.abs(parseInt(jstreeCtMarginLeft));
                      console.log(treeScrollWidth);
                        $('#jstree1 .jstree-anchor').each(function() {
                          $(this).append('<span class="bg"></span>');
                          var marginLeft = $(this)[0].getBoundingClientRect().left;
                          console.log(marginLeft);
                          //var marginLeft = Math.abs(parseInt($(this).parent().css('margin-left')));
                          $(this).find('.bg').width(treeScrollWidth-(jstreeCtMarginLeft));

                        });
                     }
                  );
				/*
                  $("#jstree1").on("after_open.jstree",
                     function(evt, data){
                      var treeScrollWidth = parseInt($('.jstree-container-ul')[0].scrollWidth);
                      console.log(treeScrollWidth)
                        $('#jstree1 .jstree-anchor').each(function() {
                          $(this).append('<span class="bg"></span>');
                          $(this).find('.bg').width(treeScrollWidth);
                        });
                     }
                  );*/
                });
              </script>
            </div>
          </div>
          <!-- //.jstree_area -->
        </div>
      </div>
      <div class="p_footer">
        <button type="button" class="btn v1 red big1"><em>등록</em></button>
        <button type="button" class="btn v1 grey big1"><em>취소</em></button>
      </div>
    </div>
  </section>
</div>
<!-- //POPUP -->
<button type="button" id="to_top" class="hide"></button>
<!-- GLOBAL LEVEL SCRIPT -->
<script type="text/javascript" src="assets/js/common.ui.js"></script>
<!-- //GLOBAL LEVEL SCRIPT -->
</body> 
</html>